jQuery(document).ready(function(f){window.setTimeout(function(){f(".rsssl-hide").fadeTo(500,0).slideUp(500,function(){f(this).remove()})},2000);function a(){f(".rsssl-panel.rsssl-remove-after-change").fadeTo(500,0).slideUp(500,function(){f(this).remove()})}function e(){f(".multiple-field").each(function(){var j=true;f(this).find("input[type=text]").each(function(){if(f(this).val()===""){j=false}});f(this).find("textarea").each(function(){if(f(this).val()===""){j=false}});var i=f(this).closest(".rsssl-panel").find(".rsssl-multiple-field-validation i");if(j){i.removeClass("fa-times");i.addClass("fa-check")}else{i.addClass("fa-times");i.removeClass("fa-check")}})}e();f(document).on("keyup",".multiple-field input[type=text]",function(){e()});f(document).on("keyup",".multiple-field textarea",function(){e()});g();f(":checkbox").change(g);function g(){f(".rsssl-validate-multicheckbox").each(function(m){var l=[];var j=true;f(this).find(":checkbox").each(function(n){l.push(f(this));if(f(this).is(":checked")){j=false}});var k=f(this).closest(".field-group").find(".rsssl-label");if(j){k.removeClass("valid-multicheckbox");k.addClass("invalid-multicheckbox");f.each(l,function(i,n){n.prop("required",true);n.addClass("is-required")})}else{k.removeClass("invalid-multicheckbox");k.addClass("valid-multicheckbox");f.each(l,function(i,n){n.prop("required",false);n.removeClass("is-required")})}});d()}f(document).on("change","input",function(i){d();a()});f(document).on("keyup","input",function(i){a()});f(document).on("change","select",function(i){d();a()});f(document).on("change","textarea",function(i){d();a()});f(document).on("keyup","textarea",function(i){a()});f(document).on("click","button",function(i){a()});if(f("input[name=step]").val()==2){setTimeout(function(){if(typeof tinymce!=="undefined"){for(var j=0;j<tinymce.editors.length;j++){tinymce.editors[j].on("NodeChange keyup",function(i,k){a()})}}},5000)}f(document).on("rssslRenderConditions",d);function d(){var i;var j=true;f(".condition-check-1").each(function(r){var o;for(o=1;o<4;o++){var l="rsssl_"+f(this).data("condition-question-"+o);var p="AND";if(l=="rsssl_undefined"){return}var m=f(this).data("condition-answer-"+o);var s=f(this).find("input[type=checkbox]");if(!s.length){s=f(this).find("input")}if(!s.length){s=f(this).find("textarea")}if(!s.length){s=f(this).find("select")}if(s.length&&s[0].hasAttribute("required")){s.addClass("is-required")}m+="";if(m.indexOf("NOT ")!==-1){m=m.replace("NOT ","");j=false}else{j=true}var n=[];if(m.indexOf(" OR ")!==-1){n=m.split(" OR ");p="OR"}else{n=[m]}var k=f(this);var q=false;n.forEach(function(t){i=c(l);if(f("select[name="+l+"]").length){i=Array(f("select[name="+l+"]").val())}if(f("input[name='"+l+"["+t+"]']").length){if(f("input[name='"+l+"["+t+"]']").is(":checked")){q=true;i=[]}else{q=false;i=[]}}if(j){if(q||i.indexOf(t)!=-1||(i==t)){k.removeClass("rsssl-hidden");if(s.hasClass("is-required")){s.prop("required",true)}q=true}else{k.addClass("rsssl-hidden");if(s.hasClass("is-required")){s.prop("required",false)}}}else{if(q||i.indexOf(t)!=-1||(i==t)){k.addClass("rsssl-hidden");if(s.hasClass("is-required")){s.prop("required",false)}}else{k.removeClass("rsssl-hidden");if(s.hasClass("is-required")){s.prop("required",true)}q=true}}});if(!q){break}}})}function c(j){if(f("input[name="+j+"]").attr("type")=="text"){return f("input[name^="+j+"]").val()}else{var i=[];f("input[name="+j+"]:checked").each(function(){i[i.length]=f(this).val()});return i}}if(f(".rsssl-select2").length){h()}function h(){f(".rsssl-select2").select2({tags:true,width:"400px"});f(".rsssl-select2-no-additions").select2({width:"400px"})}f(document).on("change",".rsssl-document-input",function(){b()});function b(){if(f(".rsssl-document-field").length){f(".rsssl-document-field").each(function(){var i=f(this).data("fieldname");var k=f("input[name="+i+"]:checked").val();var l=f(this).find(".rsssl-document-custom-url");var j=f(this).find(".rsssl-document-custom-page");if(k==="custom"){j.show();j.prop("required",true)}else{j.hide();j.prop("required",false)}if(k==="url"){l.show();l.prop("required",true)}else{l.hide();l.prop("required",false)}})}}f(document).on("click","#rsssl-create_pages",function(){var j=f("#rsssl-create_pages");j.attr("disabled","disabled");var k=j.html();j.html('<div class="rsssl-loader "><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');var i={};f(".rsssl-create-page-title").each(function(){if(i.hasOwnProperty(f(this).data("region"))){l=i[f(this).data("region")]}else{var l={}}l[f(this).attr("name")]=f(this).val();i[f(this).data("region")]=l});f.ajax({type:"POST",url:rsssl_wizard.admin_url,dataType:"json",data:({pages:JSON.stringify(i),action:"rsssl_create_pages"}),success:function(l){if(l.success){f(".rsssl-create-page-title").each(function(){f(this).removeClass("rsssl-deleted-page").addClass("rsssl-valid-page");f(this).parent().find(".rsssl-icon").replaceWith(l.icon)});j.html(l.new_button_text);j.removeAttr("disabled")}else{j.html(k)}}})})});