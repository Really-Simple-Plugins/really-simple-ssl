"use strict";(globalThis.webpackChunkreally_simple_ssl=globalThis.webpackChunkreally_simple_ssl||[]).push([[307],{8307:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ee});var s=l(9307),a=l(5609),n=l(5736),r=l(3909),i=l(4531),c=l(8473),o=l(4559),d=l(1789);const m=e=>{const{fields:t,setChangedField:l,updateField:a}=(0,o.Z)(),{licenseStatus:m,setLicenseStatus:u}=(0,d.Z)(),[p,f]=(0,s.useState)(!1),[h,_]=(0,s.useState)(!1),[y,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{c.SA("licenseNotices","refresh").then((e=>e)).then((e=>{u(e.licenseStatus),g(e.notices),f(!0)}))}),[t]);let E=e.field;return(0,s.createElement)("div",{className:"components-base-control"},(0,s.createElement)("div",{className:"components-base-control__field"},(0,s.createElement)("label",{className:"components-base-control__label",htmlFor:E.id},E.label),(0,s.createElement)("div",{className:"rsssl-license-field"},(0,s.createElement)("input",{className:"components-text-control__input",type:"password",id:E.id,value:E.value,onChange:e=>{return t=e.target.value,l(E.id,t),void a(E.id,t);var t}}),(0,s.createElement)("button",{className:"button button-default",onClick:()=>(()=>{if(f(!1),"valid"===m)c.SA("deactivate_license").then((e=>{u(e.licenseStatus),g(e.notices),f(!0)}));else{let t={};t.license=e.field.value,c.Kw("activate_license",t).then((e=>{u(e.licenseStatus),g(e.notices),f(!0)}))}})()},"valid"===m&&(0,s.createElement)(s.Fragment,null,(0,n.__)("Deactivate","really-simple-ssl")),"valid"!==m&&(0,s.createElement)(s.Fragment,null,(0,n.__)("Activate","really-simple-ssl"))))),!p&&(0,s.createElement)(i.Z,null),p&&y.map(((e,t)=>(0,s.createElement)(r.Z,{key:"taskElement-"+t,index:t,notice:e,highLightField:""}))))},u=e=>(0,s.createElement)("div",{className:"components-base-control"},(0,s.createElement)("div",{className:"components-base-control__field"},(0,s.createElement)("label",{className:"components-base-control__label",htmlFor:e.field.id},e.field.label),(0,s.createElement)("input",{className:"components-text-control__input",type:"password",id:e.field.id,value:e.field.value,onChange:t=>{return l=t.target.value,e.fields[e.index].value=l,void e.saveChangedFields(e.field.id);var l}}))),p=e=>{const{updateField:t,setChangedField:l,saveFields:n,handleNextButtonDisabled:r}=(0,o.Z)(),i=(0,s.useRef)(!1);let c=e.field.value,d=e.field,m=[];if(d.options)for(var u in d.options)if(d.options.hasOwnProperty(u)){let e={};e.label=d.options[u],e.value=u,m.push(e)}return(0,s.createElement)(a.SelectControl,{label:d.label,onChange:s=>(async s=>{let a=e.field;r(!0),i.current=!0,t(a.id,s),l(a.id,s),await n(!0,!1),r(!1),i.current=!1})(s),value:c,options:m,disabled:i.current})};var f=l(9950),h=l(4064),_=l(9818),y=l(7839),g=l(8914);const E=e=>{const{addHelpNotice:t}=(0,o.Z)();let l=e.action;if((0,y.Z)((()=>{l&&"challenge_directory_reachable"===l.action&&"error"===l.status&&t(e.field.id,"default",(0,n.__)("The challenge directory is used to verify the domain ownership.","really-simple-ssl")),l&&"check_key_directory"===l.action&&"error"===l.status&&t(e.field.id,"default",(0,n.__)("The key directory is needed to store the generated keys.","really-simple-ssl")+" "+(0,n.__)("By placing it outside the root folder, it is not publicly accessible.","really-simple-ssl")),l&&"check_certs_directory"===l.action&&"error"===l.status&&t(e.field.id,"default",(0,n.__)("The certificate will get stored in this directory.","really-simple-ssl")+" "+(0,n.__)("By placing it outside the root folder, it is not publicly accessible.","really-simple-ssl"))})),!l)return(0,s.createElement)(s.Fragment,null);const r=()=>(e.updateField("verification_type","dns"),c.Kr("update_verification_type","dns").then((t=>{e.selectMenu("le-dns-verification"),(0,_.dispatch)("core/notices").createNotice("success",(0,n.__)("Switched to DNS","really-simple-ssl"),{__unstableHTML:!0,id:"rsssl_switched_to_dns",type:"snackbar",isDismissible:!0}).then((0,h.Z)(3e3)).then((e=>{(0,_.dispatch)("core/notices").removeNotice("rsssl_switched_to_dns")}))})));return(0,s.createElement)("div",{className:"rsssl-test-results"},"error"===l.status&&(0,s.createElement)("h4",null,(0,n.__)("Next step","really-simple-ssl")),"error"===l.status&&"challenge_directory_reachable"===l.action&&(0,s.createElement)("div",null,(0,s.createElement)("p",null,(0,n.__)("If the challenge directory cannot be created, or is not reachable, you can either remove the server limitation, or change to DNS verification.","really-simple-ssl")),(0,s.createElement)(a.Button,{variant:"secondary",onClick:()=>r()},(0,n.__)("Switch to DNS verification","really-simple-ssl"))),"error"!==l.status&&"cpanel"===rsssl_settings.hosting_dashboard&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",null,(0,s.createElement)(f.Z,{target:"_blank",text:(0,n.__)("If you also want to secure subdomains like mail.domain.com, cpanel.domain.com, you have to use the %sDNS%s challenge.","really-simple-ssl"),url:"https://really-simple-ssl.com/lets-encrypt-authorization-with-dns"})," ",(0,n.__)("Please note that auto-renewal with a DNS challenge might not be possible.","really-simple-ssl")),(0,s.createElement)(a.Button,{variant:"secondary",onClick:()=>r()},(0,n.__)("Switch to DNS verification","really-simple-ssl"))),"error"===l.status&&"check_challenge_directory"===l.action&&(0,s.createElement)("div",null,(0,s.createElement)("h4",null,(0,n.__)("Create a challenge directory","really-simple-ssl")),(0,s.createElement)("p",null,(0,n.__)("Navigate in FTP or File Manager to the root of your WordPress installation:","really-simple-ssl")),(0,s.createElement)("ul",null,(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Create a folder called “.well-known”","really-simple-ssl")),(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Inside the folder called “.well-known” create a new folder called “acme-challenge”, with 644 writing permissions.","really-simple-ssl")),(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Click the refresh button.","really-simple-ssl"))),(0,s.createElement)("h4",null,(0,n.__)("Or you can switch to DNS verification","really-simple-ssl")),(0,s.createElement)("p",null,(0,n.__)("If the challenge directory cannot be created, you can either remove the server limitation, or change to DNS verification.","really-simple-ssl")),(0,s.createElement)(a.Button,{variant:"secondary",onClick:()=>r()},(0,n.__)("Switch to DNS verification","really-simple-ssl"))),"error"===l.status&&"check_key_directory"===l.action&&(0,s.createElement)("div",null,(0,s.createElement)("h4",null,(0,n.__)("Create a key directory","really-simple-ssl")),(0,s.createElement)("p",null,(0,n.__)("Navigate in FTP or File Manager to one level above the root of your WordPress installation:","really-simple-ssl")),(0,s.createElement)("ul",null,(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Create a folder called “ssl”","really-simple-ssl")),(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Inside the folder called “ssl” create a new folder called “keys”, with 644 writing permissions.","really-simple-ssl")),(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Click the refresh button.","really-simple-ssl")))),"error"===l.status&&"check_certs_directory"===l.action&&(0,s.createElement)("div",null,(0,s.createElement)("h4",null,(0,n.__)("Create a certs directory","really-simple-ssl")),(0,s.createElement)("p",null,(0,n.__)("Navigate in FTP or File Manager to one level above the root of your WordPress installation:","really-simple-ssl")),(0,s.createElement)("ul",null,(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Create a folder called “ssl”","really-simple-ssl")),(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Inside the folder called “ssl” create a new folder called “certs”, with 644 writing permissions.","really-simple-ssl")),(0,s.createElement)("li",{className:"rsssl-tooltip-icon dashicons-before rsssl-icon arrow-right-alt2 dashicons-arrow-right-alt2"},(0,n.__)("Click the refresh button.","really-simple-ssl")))))};var v=l(2485);const b=e=>{const{fields:t,addHelpNotice:l,updateField:r,setChangedField:i,saveFields:c,fetchFieldsData:d,getFieldValue:m}=(0,o.Z)(),{selectedSubMenuItem:u}=(0,v.Z)(),[p,h]=(0,s.useState)(!1);let _=e.action;return(0,y.Z)((()=>{_&&"challenge_directory_reachable"===_.action&&"error"===_.status&&l(e.field.id,"default",(0,n.__)("The challenge directory is used to verify the domain ownership.","really-simple-ssl"));let t=!!_&&_.output;void 0!==t&&0!==t.length||(t=!1),t&&h(t)})),"dir"===m("verification_type")?(0,s.createElement)(s.Fragment,null):(0,s.createElement)(s.Fragment,null,p&&p.length>0&&(0,s.createElement)("div",{className:"rsssl-test-results"},(0,s.createElement)("h4",null,(0,n.__)("Next step","really-simple-ssl")),(0,s.createElement)("p",null,(0,n.__)("Add the following token as text record to your DNS records. We recommend to use a short TTL during installation, in case you need to change it.","really-simple-ssl"),(0,s.createElement)(f.Z,{target:"_blank",text:(0,n.__)("Read more","really-simple-ssl"),url:"https://really-simple-ssl.com/how-to-add-a-txt-record-to-dns"})),(0,s.createElement)("div",{className:"rsssl-dns-text-records"},(0,s.createElement)("div",null,(0,s.createElement)("div",{className:"rsssl-dns-domain"},"@/",(0,n.__)("domain","really-simple-ssl")),(0,s.createElement)("div",{className:"rsssl-dns-field"},(0,n.__)("Value","really-simple-ssl"))),p.map(((e,t)=>(0,s.createElement)("div",null,(0,s.createElement)("div",{className:"rsssl-dns-"},"_acme-challenge.",e.domain),(0,s.createElement)("div",{className:"rsssl-dns-field rsssl-selectable"},e.token)))))),(0,s.createElement)("div",{className:"rsssl-test-results"},(0,s.createElement)("p",null,(0,n.__)("DNS verification active. You can switch back to directory verification here.","really-simple-ssl")),(0,s.createElement)(a.Button,{variant:"secondary",onClick:()=>(async()=>{r("verification_type","dir"),i("verification_type","dir"),await c(!0,!0),await d(u)})()},(0,n.__)("Switch to directory verification","really-simple-ssl"))))},N=e=>{let t=e.action;return t?(0,s.createElement)("div",{className:"rsssl-test-results"},"error"===t.status&&"verify_dns"===t.action&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",null,(0,n.__)("We could not check the DNS records. If you just added the record, please check in a few minutes.","really-simple-ssl")," ",(0,s.createElement)(f.Z,{target:"_blank",text:(0,n.__)("You can manually check the DNS records in an %sonline tool%s.","really-simple-ssl"),url:"https://mxtoolbox.com/SuperTool.aspx"}),(0,n.__)("If you're sure it's set correctly, you can click the button to skip the DNS check.","really-simple-ssl")," "),(0,s.createElement)(a.Button,{variant:"secondary",onClick:()=>c.Kr("skip_dns_check").then((t=>{e.restartTests(),(0,_.dispatch)("core/notices").createNotice("success",(0,n.__)("Skip DNS verification","really-simple-ssl"),{__unstableHTML:!0,id:"rsssl_skip_dns",type:"snackbar",isDismissible:!0}).then((0,h.Z)(3e3)).then((e=>{(0,_.dispatch)("core/notices").removeNotice("rsssl_skip_dns")}))}))},(0,n.__)("Skip DNS check","really-simple-ssl")))):(0,s.createElement)(s.Fragment,null)};var w=l(7372);const k=()=>(0,s.createElement)("div",{className:"rsssl-lets-encrypt-tests"},(0,s.createElement)(w.Z,null)),C=e=>{const{addHelpNotice:t}=(0,o.Z)(),[l,a]=(0,s.useState)(!1);let r=e.action;(0,y.Z)((()=>{r&&"warning"===r.status&&l&&l.generated_by_rsssl&&(t(e.field.id,"default",(0,n.__)("This is the certificate, which you need to install in your hosting dashboard.","really-simple-ssl"),(0,n.__)("Certificate (CRT)","really-simple-ssl")),t(e.field.id,"default",(0,n.__)("The private key can be uploaded or pasted in the appropriate field on your hosting dashboard.","really-simple-ssl"),(0,n.__)("Private Key (KEY)","really-simple-ssl")),t(e.field.id,"default",(0,n.__)("The CA Bundle will sometimes be automatically detected. If not, you can use this file.","really-simple-ssl"),(0,n.__)("Certificate Authority Bundle (CABUNDLE)","really-simple-ssl"))),!r||"error"!==r.status&&"warning"!==r.status||c.Kr("installation_data").then((e=>{e&&a(e.output)}))}));const i=e=>{let t,l=document.querySelector(".rsssl-"+e).innerText;const s=document.createElement("textarea");s.value=l,document.body.appendChild(s),s.select();try{t=document.execCommand("copy")}catch(e){t=!1}document.body.removeChild(s),(0,_.dispatch)("core/notices").createNotice("success",(0,n.__)("Copied!","really-simple-ssl"),{__unstableHTML:!0,id:"rsssl_copied_data",type:"snackbar",isDismissible:!0}).then((0,h.Z)(3e3)).then((e=>{(0,_.dispatch)("core/notices").removeNotice("rsssl_copied_data")}))};return r&&l?(0,s.createElement)("div",{className:"rsssl-test-results"},!l.generated_by_rsssl&&(0,s.createElement)(s.Fragment,null,(0,n.__)("The certificate is not generated by Really Simple SSL, so there are no installation files here","really-simple-ssl")),l.generated_by_rsssl&&"warning"===r.status&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("h4",null,(0,n.__)("Next step","really-simple-ssl")),(0,s.createElement)("div",{className:"rsssl-template-intro"},(0,n.__)("Install your certificate.","really-simple-ssl")),(0,s.createElement)("h4",null,(0,n.__)("Certificate (CRT)","really-simple-ssl")),(0,s.createElement)("div",{className:"rsssl-certificate-data rsssl-certificate",id:"rsssl-certificate"},l.certificate_content),(0,s.createElement)("a",{href:l.download_url+"&type=certificate",className:"button button-secondary"},(0,n.__)("Download","really-simple-ssl")),(0,s.createElement)("button",{type:"button",onClick:e=>i("certificate"),className:"button button-primary"},(0,n.__)("Copy content","really-simple-ssl")),(0,s.createElement)("h4",null,(0,n.__)("Private Key (KEY)","really-simple-ssl")),(0,s.createElement)("div",{className:"rsssl-certificate-data rsssl-key",id:"rsssl-key"},l.key_content),(0,s.createElement)("a",{href:l.download_url+"&type=private_key",className:"button button-secondary"},(0,n.__)("Download","really-simple-ssl")),(0,s.createElement)("button",{type:"button",className:"button button-primary",onClick:e=>i("key")},(0,n.__)("Copy content","really-simple-ssl")),(0,s.createElement)("h4",null,(0,n.__)("Certificate Authority Bundle (CABUNDLE)","really-simple-ssl")),(0,s.createElement)("div",{className:"rsssl-certificate-data rsssl-cabundle",id:"rsssl-cabundle"},l.ca_bundle_content),(0,s.createElement)("a",{href:l.download_url+"&type=intermediate",className:"button button-secondary"},(0,n.__)("Download","really-simple-ssl")),(0,s.createElement)("button",{type:"button",className:"button button-primary",onClick:e=>i("cabundle")},(0,n.__)("Copy content","really-simple-ssl")))):(0,s.createElement)(s.Fragment,null)};var S=l(4018);const x=e=>{const{handleNextButtonDisabled:t,getFieldValue:l}=(0,o.Z)(),{attemptCount:a,setAttemptCount:r,progress:i,setProgress:d,maxAttempts:m,setMaxAttempts:u,refreshTests:p,setRefreshTests:f}=(0,g.Z)(),_=(0,s.useRef)(1500),y=(0,s.useRef)(!1),v=(0,s.useRef)(""),w=(0,s.useRef)(0),x=(0,s.useRef)(!1),D=(0,s.useRef)(-1),F=(0,s.useRef)([]),T=(0,s.useRef)([]),L=(0,s.useRef)(1),Z=(0,s.useRef)(0);(0,s.useEffect)((()=>{M()}),[e.field]),(0,s.useEffect)((()=>{!x.current&&T.length>0&&(w.current=0)}),[T.current]),(0,s.useEffect)((()=>{0===w.current&&A()}),[w.current]),(0,s.useEffect)((()=>{x.current=T.current[w.current],y.current=setInterval((()=>{d(Z.current+.2)}),100)}),[w.current]),(0,s.useEffect)((()=>{w.current>D.current&&(D.current=w.current,d(100/L.current*w.current)),x.current=T.current[w.current],x.current&&"retry"===x.current.do&&a>1&&d(90)}),[w.current,p]),(0,s.useEffect)((()=>{p&&(f(!1),M(),T.current.forEach((function(e,t){T.current[t].status="inactive"})))}),[p]);const R={inactive:{icon:"circle-times",color:"grey"},warning:{icon:"circle-times",color:"orange"},error:{icon:"circle-times",color:"red"},success:{icon:"circle-check",color:"green"}},M=()=>{t(!0),T.current=(()=>{let t=e.field.actions;return"generation"===e.field.id&&(t=I(t)),L.current=t.length,t})(),d(0),Z.current=0,F.current=[],w.current=0,x.current=!1,D.current=-1,v.current=""},I=e=>{let t=l("verification_type");if(t||(t="dir"),"dns"===t){let t=!1;e.forEach((function(e,l){"verify_dns"===e.action&&(t=!0)}));let l=-1;if(e.forEach((function(e,t){"create_bundle_or_renew"===e.action&&(l=t)})),!t&&l>0){let t=e[l],s={action:"verify_dns"};s.description=(0,n.__)("Verifying DNS records...","really-simple-ssl"),s.attempts=2,e[l]=s,e.push(t)}}return e},A=()=>{if(Z.current>=100)return;let l={...T.current[w.current]};if(!l)return;let s=l.action;if(F.current.includes(s))return;F.current.push(s);const n=new Date;u(l.attempts),c.Kr(s,e.field.id).then((e=>{let t=new Date-n;const s=Math.round(t);l.status=e.status?e.status:"inactive",l.hide=!1,l.description=e.message,l.do=e.action,l.output=!!e.output&&e.output,_.current=500,s<1500&&(_.current=1500-s),x.current=l,T.current[w.current]=l})).then((0,h.Z)(_.current)).then((()=>{(e=>{clearInterval(y.current),v.current=e.status,"success"===e.status?r(0):(Number.isInteger(e.attemptCount)||r(0),r(a+1));let l=new CustomEvent("rsssl_le_response",{detail:e});document.dispatchEvent(l),"finalize"===e.do?(T.current.forEach((function(e,t){t>w.current&&((e,t,l)=>{let s=T.current;s.hasOwnProperty(e)&&s[e].hasOwnProperty(t)&&(s[e][t]=!0),T.current=s})(t,"hide")})),w.current=L.current+1,t(!1)):"continue"===e.do||"skip"===e.do?(r(1),"skip"===e.do&&(T.current[w.current].hide=!0),L.current-1>w.current?(w.current,w.current=w.current+1,A()):(t(!1),w.current=w.current+1)):"retry"===e.do?a>=m?w.current=L.current:A():"stop"===e.do&&(w.current=L.current)})(l)}))},P=e=>R.hasOwnProperty(e.status)?R[e.status].icon:R.inactive.icon,O=e=>R.hasOwnProperty(e.status)?R[e.status].color:R.inactive.color;let B="error"===v.current?"rsssl-orange":"";if(!e.field.actions)return(0,s.createElement)(s.Fragment,null);let H=T.current.filter((e=>!0!==e.hide));return Z.current=i,L.current===w.current+1&&(Z.current=100),(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"rsssl-lets-encrypt-tests"},(0,s.createElement)("div",{className:"rsssl-progress-bar"},(0,s.createElement)("div",{className:"rsssl-progress"},(0,s.createElement)("div",{className:"rsssl-bar "+B,style:Object.assign({},{width:i+"%"})}))),(0,s.createElement)("div",{className:"rsssl_letsencrypt_container rsssl-progress-container field-group"},(0,s.createElement)("ul",null,H.map(((e,t)=>(0,s.createElement)("li",{key:"action-"+t},(0,s.createElement)(S.Z,{name:P(e),color:O(e)}),"retry"===e.do&&a>=1&&(0,s.createElement)(s.Fragment,null,(0,n.__)("Attempt %s.","really-simple-ssl").replace("%s",a)," ")," ",(0,s.createElement)("span",{dangerouslySetInnerHTML:{__html:e.description}})))))),"directories"===e.field.id&&(0,s.createElement)(E,{field:e.field,action:T.current[w.current]}),"dns-verification"===e.field.id&&(0,s.createElement)(b,{field:e.field,action:T.current[w.current]}),"generation"===e.field.id&&(0,s.createElement)(N,{field:e.field,action:T.current[w.current]}),"installation"===e.field.id&&(0,s.createElement)(C,{field:e.field,action:T.current[w.current]}),"activate"===e.field.id&&(0,s.createElement)(k,{field:e.field,action:T.current[w.current]})))};var D=l(5097);const F=e=>{const{handleModal:t}=(0,D.Z)();return(0,s.createElement)("button",{className:"button button-"+e.btnStyle,onClick:l=>{t(!0,e.modalData,e.item)}},e.btnText)};var T=l(270);const L=(0,T.Ue)(((e,t)=>({mixedContentData:[],dataLoaded:!1,fixedItemId:!1,action:"",nonce:"",completedStatus:"never",progress:0,scanStatus:!1,fetchMixedContentData:async()=>{e({scanStatus:"running"});const{data:t,progress:l,state:s,action:a,nonce:n,completed_status:r}=await Z(!1);e({scanStatus:s,mixedContentData:t,progress:l,action:a,nonce:n,completedStatus:r,dataLoaded:!0})},start:async()=>{const{data:t,progress:l,state:s,action:a,nonce:n,completed_status:r}=await Z("start");e({scanStatus:s,mixedContentData:t,progress:l,action:a,nonce:n,completedStatus:r,dataLoaded:!0})},runScanIteration:async()=>{let l=t().scanStatus;if("stop"===l)return;const{data:s,progress:a,state:n,action:r,nonce:i,completed_status:c}=await Z(l);"stop"!==t().scanStatus&&e({scanStatus:n,mixedContentData:s,progress:a,action:r,nonce:i,completedStatus:c,dataLoaded:!0})},stop:async()=>{e({scanStatus:"stop"});const{data:t,progress:l,state:s,action:a,nonce:n,completed_status:r}=await Z("stop");e({scanStatus:"stop",mixedContentData:t,progress:l,action:a,nonce:n,completedStatus:r})},removeDataItem:l=>{let s=t().mixedContentData;for(const e of s)e.id===l.id&&(e.fixed=!0);e({mixedContentData:s})},ignoreDataItem:l=>{let s=t().mixedContentData;for(const e of s)e.id===l.id&&(e.ignored=!0);e({mixedContentData:s})}}))),Z=async e=>await c.SA("mixed_content_scan",e).then((t=>{let l=t.data;return"object"==typeof l&&(l=Object.values(l)),Array.isArray(l)||(l=[]),t.data=l,"stop"===e&&(t.state="stop"),t})),R=e=>{const{fixedItems:t,ignoredItems:r}=(0,D.Z)(),{fetchMixedContentData:i,mixedContentData:c,runScanIteration:o,start:d,stop:m,dataLoaded:u,action:p,scanStatus:f,progress:h,completedStatus:_,nonce:y,removeDataItem:g,ignoreDataItem:E}=L(),[v,b]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[x,T]=(0,s.useState)(null);(0,s.useEffect)((()=>{l.e(44).then(l.bind(l,44)).then((e=>{let{default:t,createTheme:l}=e;C((()=>t)),T((()=>l("really-simple-plugins",{divider:{default:"transparent"}},"light")))}))}),[]),(0,s.useEffect)((()=>{i()}),[]),(0,s.useEffect)((()=>{"running"===f&&o()}),[h,f]);let Z=e.field,R=[];Z.columns.forEach((function(e,t){let l={name:e.name,sortable:e.sortable,grow:e.grow,selector:t=>t[e.column],right:!!e.right};R.push(l)}));let M=u?c:[];for(const l of M)l.warningControl=(0,s.createElement)("span",{className:"rsssl-task-status rsssl-warning"},(0,n.__)("Warning","really-simple-ssl")),t.includes(l.id)&&(l.fixed=!0),r.includes(l.id)&&(l.ignored=!0),l.fix&&(l.fix.url=l.blocked_url,l.fix.nonce=y),l.details&&(l.details.url=l.blocked_url,l.details.nonce=y,l.details.ignored=l.ignored),l.location.length>0&&(-1!==l.location.indexOf("http://")||-1!==l.location.indexOf("https://")?l.locationControl=(0,s.createElement)("a",{href:l.location,target:"_blank"},(0,n.__)("View","really-simple-ssl")):l.locationControl=l.location),l.detailsControl=l.details&&(0,s.createElement)(F,{handleModal:e.handleModal,item:l,id:l.id,btnText:(0,n.__)("Details","really-simple-ssl"),btnStyle:"secondary",modalData:l.details}),l.fixControl=l.fix&&(0,s.createElement)(F,{className:"button button-primary",handleModal:e.handleModal,item:l,id:l.id,btnText:(0,n.__)("Fix","really-simple-ssl"),btnStyle:"primary",modalData:l.fix});v||(M=M.filter((e=>!e.ignored))),M=M.filter((e=>!e.fixed));let I=h+"%",A="running"===f,P="running"!==f;return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"rsssl-progress-container"},(0,s.createElement)("div",{className:"rsssl-progress-bar",style:{width:I}})),"running"===f&&(0,s.createElement)("div",{className:"rsssl-current-scan-action"},p),0===M.length&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"rsssl-mixed-content-description"},"running"!==f&&"never"===_&&(0,n.__)("No results. Start your first scan","really-simple-ssl"),"running"!==f&&"completed"===_&&(0,n.__)("Everything is now served over SSL","really-simple-ssl")),("running"===f||"completed"!==_)&&(0,s.createElement)("div",{className:"rsssl-mixed-content-placeholder"},(0,s.createElement)("div",null),(0,s.createElement)("div",null),(0,s.createElement)("div",null)),"running"!==f&&"completed"===_&&(0,s.createElement)("div",{className:"rsssl-shield-overlay"},(0,s.createElement)(S.Z,{name:"shield",size:"80px"}))),M.length>0&&(0,s.createElement)("div",{className:"rsssl-mixed-content-datatable"},(0,s.createElement)(k,{columns:R,data:M,dense:!0,pagination:!0,paginationResetDefaultPage:N,noDataComponent:(0,n.__)("No results","really-simple-ssl"),theme:x,customStyles:{headCells:{style:{paddingLeft:"0",paddingRight:"0"}},cells:{style:{paddingLeft:"0",paddingRight:"0"}}}})),(0,s.createElement)("div",{className:"rsssl-grid-item-content-footer"},(0,s.createElement)("button",{className:"button",disabled:A,onClick:()=>d()},(0,n.__)("Start scan","really-simple-ssl")),(0,s.createElement)("button",{className:"button",disabled:P,onClick:()=>m()},(0,n.__)("Stop","really-simple-ssl")),(0,s.createElement)(a.ToggleControl,{checked:1==v,onChange:e=>{b(!v)}}),(0,s.createElement)("label",null,(0,n.__)("Show ignored URLs","really-simple-ssl"))))},M=e=>{const{fields:t,updateField:r,updateSubField:i,setChangedField:c,saveFields:d}=(0,o.Z)(),[m,u]=(0,s.useState)(0),[p,f]=(0,s.useState)(null),[h,_]=(0,s.useState)(null);(0,s.useEffect)((()=>{l.e(44).then(l.bind(l,44)).then((e=>{let{default:t,createTheme:l}=e;f((()=>t)),_((()=>l("really-simple-plugins",{divider:{default:"transparent"}},"light")))}))}),[]),(0,s.useEffect)((()=>{let e=t.filter((e=>"enable_permissions_policy"===e.id))[0];u(e.value)}),[]);const y=(t,l)=>{let s=e.field;"object"==typeof s.value&&r(s.id,Object.values(s.value)),i(s.id,l.id,t),c(s.id,t),d(!0,!1)},g=(e,l)=>{e.preventDefault();let s=t.filter((e=>"enable_permissions_policy"===e.id))[0];u(l),r(s.id,l),c(s.id,s.value),d(!0,!1)};let E=e.field,v=(E.value,e.options);columns=[],E.columns.forEach((function(e,t){let l={name:e.name,sortable:e.sortable,width:e.width,selector:t=>t[e.column]};columns.push(l)}));let b=E.value;"object"==typeof b&&(b=Object.values(b)),Array.isArray(b)||(b=[]);let N=[];for(const e of b){let t={...e};t.valueControl=(0,s.createElement)(a.SelectControl,{help:"",value:e.value,disabled:!1,options:v,label:"",onChange:t=>y(t,e)}),N.push(t)}return(0,s.createElement)("div",{className:e.highLightClass},(0,s.createElement)(p,{columns,data:N,dense:!0,pagination:!1,customStyles:{headCells:{style:{paddingLeft:"0",paddingRight:"0"}},cells:{style:{paddingLeft:"0",paddingRight:"0"}}},theme:h}),1!=m&&(0,s.createElement)("button",{className:"button button-primary",onClick:e=>g(e,!0)},(0,n.__)("Enforce","really-simple-ssl")),1==m&&(0,s.createElement)("div",{className:"rsssl-locked"},(0,s.createElement)("div",{className:"rsssl-shield-overlay"},(0,s.createElement)(S.Z,{name:"shield",size:"80px"})),(0,s.createElement)("div",{className:"rsssl-locked-overlay"},(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-learning-mode-enforced"},(0,n.__)("Enforced","really-simple-ssl")),e.disabled&&(0,s.createElement)(s.Fragment,null,(0,n.__)("Permissions Policy is set outside Really Simple SSL.","really-simple-ssl")," "),!e.disabled&&(0,s.createElement)(s.Fragment,null,(0,n.__)("Permissions Policy is enforced.","really-simple-ssl")," "),!e.disabled&&(0,s.createElement)("a",{className:"rsssl-learning-mode-link",href:"#",onClick:e=>g(e,!1)},(0,n.__)("Disable","really-simple-ssl")))),e.disabled&&1!=m&&(0,s.createElement)("div",{className:"rsssl-locked"},(0,s.createElement)("div",{className:"rsssl-locked-overlay"},(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-disabled"},(0,n.__)("Disabled","really-simple-ssl")),(0,n.__)("The Permissions Policy has been disabled.","really-simple-ssl"))))},I=e=>{let t=e.field,l=t.value?"is-checked":"",a=t.disabled?"is-disabled":"";return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"components-base-control components-toggle-control"},(0,s.createElement)("div",{className:"components-base-control__field"},(0,s.createElement)("div",{"data-wp-component":"HStack",className:"components-flex components-h-stack"},(0,s.createElement)("span",{className:"components-form-toggle "+l+" "+a},(0,s.createElement)("input",{checked:t.value,className:"components-form-toggle__input",onChange:t=>(t=>{let l=!e.field.value;e.onChangeHandler(l)})(),id:t.id,type:"checkbox",disabled:e.disabled}),(0,s.createElement)("span",{className:"components-form-toggle__track"}),(0,s.createElement)("span",{className:"components-form-toggle__thumb"})),(0,s.createElement)("label",{htmlFor:t.id,className:"components-toggle-control__label"},e.label)))))},A=()=>{const[e,t]=(0,s.useState)(""),[l,r]=(0,s.useState)(!1);let i=l||0===e.length;return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(a.TextareaControl,{disabled:l,placeholder:(0,n.__)("Type your question here","really-simple-ssl"),onChange:e=>(e=>{t(e)})(e)}),(0,s.createElement)(a.Button,{disabled:i,variant:"secondary",onClick:t=>(r(!0),c.SA("supportData","refresh").then((t=>{let l=e.replace(/(?:\r\n|\r|\n)/g,"--br--"),s="https://really-simple-ssl.com/support?customername="+encodeURIComponent(t.customer_name)+"&email="+t.email+"&domain="+t.domain+"&scanresults="+encodeURIComponent(t.scan_results)+"&licensekey="+encodeURIComponent(t.license_key)+"&supportrequest="+encodeURIComponent(l)+"&htaccesscontents="+t.htaccess_contents+"&debuglog="+t.system_status;window.location.assign(s)})))},(0,n.__)("Send","really-simple-ssl")))},P=(0,T.Ue)(((e,t)=>({learningModeData:[],dataLoaded:!1,fetchLearningModeData:async t=>{let l={};l.type=t,l.lm_action="get";let s=await c.Kw("learning_mode_data",l).then((e=>e));"object"==typeof s&&(s=Object.values(s)),Array.isArray(s)||(s=[]),e({learningModeData:s,dataLoaded:!0})},updateStatus:async(l,s,a)=>{let n=t().learningModeData,r={};r.type=a,r.updateItemId=s.id,r.enabled=1==l?0:1,r.lm_action="update";for(const e of n)s.id===e.id&&e.status&&(e.status=r.enabled);e({learningModeData:n}),n=await c.Kw("learning_mode_data",r).then((e=>e)),"object"==typeof n&&(n=Object.values(n)),Array.isArray(n)||(n=[]),e({learningModeData:n,dataLoaded:!0})},deleteData:async(l,s)=>{let a=t().learningModeData,n={};n.type=s,n.updateItemId=l.id,n.lm_action="delete",a.forEach((function(e,t){e.id===l.id&&a.splice(t,1)})),e({learningModeData:a}),a=await c.Kw("learning_mode_data",n).then((e=>e)),"object"==typeof a&&(a=Object.values(a)),Array.isArray(a)||(a=[]),e({learningModeData:a,dataLoaded:!0})}}))),O=e=>{const{updateStatus:t}=P();let l=1==e.item.status?"button button-primary rsssl-status-allowed":"button button-default rsssl-status-revoked",a=1==e.item.status?(0,n.__)("Revoke","really-simple-ssl"):(0,n.__)("Allow","really-simple-ssl");return(0,s.createElement)("button",{onClick:()=>t(e.item.status,e.item,e.field.id),className:l},a)},B=e=>{const{deleteData:t}=P();return(0,s.createElement)("button",{type:"button",className:" rsssl-learning-mode-delete",onClick:()=>t(e.item,e.field.id)},(0,s.createElement)("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",height:"16"},(0,s.createElement)("path",{fill:"#000000",d:"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"})))},H=e=>{const{updateField:t,getFieldValue:a,getField:r,setChangedField:i,highLightField:c,saveFields:d}=(0,o.Z)(),{fetchLearningModeData:m,learningModeData:u,dataLoaded:p}=P(),[f,h]=(0,s.useState)(0),[_,y]=(0,s.useState)(0),[g,E]=(0,s.useState)(0),[v,b]=(0,s.useState)(0),[N,w]=(0,s.useState)(!1),[k,C]=(0,s.useState)(0),[x,D]=(0,s.useState)(-1),[F,T]=(0,s.useState)(!1),[L,Z]=(0,s.useState)(null),[R,M]=(0,s.useState)(null);(0,s.useEffect)((()=>{l.e(44).then(l.bind(l,44)).then((e=>{let{default:t,createTheme:l}=e;Z((()=>t)),M((()=>l("really-simple-plugins",{divider:{default:"transparent"}},"light")))}))}),[]),(0,s.useEffect)((()=>{(async()=>{await m(e.field.id);let t=r(e.field.control_field),l="enforced-by-thirdparty"===t.value,s=l||"enforce"===t.value;T(t),h(l),b("completed"===t.value),w("error"===t.value),C(a(e.field.control_field+"_lm_enabled_once")),y(s),E("learning_mode"===t.value)})()}),[_,g]);const I=(e,l)=>{e.preventDefault();let s=1==l?"enforce":"disabled";y(l),b(0),E(0),i(F.id,s),t(F.id,s),d(!0,!1),m()},A=async l=>{l.preventDefault();let s,a=r(e.field.control_field+"_lm_enabled_once");g&&(C(1),t(a.id,1)),g||v?(E(0),s="disabled"):(E(1),s="learning_mode"),b(0),i(F.id,s),t(F.id,s),i(a.id,a.value),t(a,a.value),await d(!0,!1)};let H=e.field,j=(0,n.__)(" The %s is now in report-only mode and will collect directives. This might take a while. Afterwards you can Exit, Edit and Enforce these Directives.","really-simple-ssl").replace("%s",H.label),K=(0,n.__)("%s has been disabled.","really-simple-ssl").replace("%s",H.label),z=(0,n.__)("%s is enforced.","really-simple-ssl").replace("%s",H.label),V=!k;f&&(K=(0,n.__)("%s is already set outside Really Simple SSL.","really-simple-ssl").replace("%s",H.label));let W="rsssl-field-wrap";c===e.field.id&&(W="rsssl-field-wrap rsssl-highlight");let U=[];H.columns.forEach((function(e,t){let l={name:e.name,sortable:e.sortable,width:e.width,selector:t=>t[e.column]};U.push(l)}));let q=u;q=q.filter((e=>e.status<2)),-1!=x&&(q=q.filter((e=>e.status==x)));for(const t of q)t.login_status&&(t.login_statusControl=1==t.login_status?(0,n.__)("success","really-simple-ssl"):(0,n.__)("failed","really-simple-ssl")),t.statusControl=(0,s.createElement)(O,{item:t,field:e.field}),t.deleteControl=(0,s.createElement)(B,{item:t,field:e.field});return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{key:"1",className:W},!p||0==q.length&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"rsssl-learningmode-placeholder"},(0,s.createElement)("div",null),(0,s.createElement)("div",null),(0,s.createElement)("div",null),(0,s.createElement)("div",null))),q.length>0&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(L,{columns:U,data:q,dense:!0,pagination:!0,noDataComponent:(0,n.__)("No results","really-simple-ssl"),persistTableHead:!0,theme:R,customStyles:{headCells:{style:{paddingLeft:"0",paddingRight:"0"}},cells:{style:{paddingLeft:"0",paddingRight:"0"}}},conditionalRowStyles:[{when:e=>0==e.status,classNames:["rsssl-datatables-revoked"]}]})),(0,s.createElement)("div",{key:"2",className:"rsssl-learning-mode-footer "},N&&(0,s.createElement)("div",{className:"rsssl-locked"},(0,s.createElement)("div",{className:"rsssl-locked-overlay"},(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-learning-mode-error"},(0,n.__)("Error detected","really-simple-ssl")),(0,n.__)("%s cannot be implemented due to server limitations. Check your notices for the detected issue.","really-simple-ssl").replace("%s",H.label)," ",(0,s.createElement)("a",{className:"rsssl-learning-mode-link",href:"#",onClick:e=>I(e,!1)},(0,n.__)("Disable","really-simple-ssl")))),!N&&(0,s.createElement)(s.Fragment,null,1!=_&&(0,s.createElement)("button",{disabled:V,className:"button button-primary",onClick:e=>I(e,!0)},(0,n.__)("Enforce","really-simple-ssl")),!f&&1==_&&(0,s.createElement)("button",{className:"button",onClick:e=>I(e,!1)},(0,n.__)("Disable","really-simple-ssl")),(0,s.createElement)("label",null,(0,s.createElement)("input",{type:"checkbox",disabled:_,checked:1==g,value:g,onChange:e=>A(e)}),(0,n.__)("Enable Learning Mode to configure automatically","really-simple-ssl")),1==_&&(0,s.createElement)("div",{className:"rsssl-locked"},(0,s.createElement)("div",{className:"rsssl-shield-overlay"},(0,s.createElement)(S.Z,{name:"shield",size:"80px"})),(0,s.createElement)("div",{className:"rsssl-locked-overlay"},(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-learning-mode-enforced"},(0,n.__)("Enforced","really-simple-ssl")),z," ",(0,s.createElement)("a",{className:"rsssl-learning-mode-link",href:"#",onClick:e=>I(e)},(0,n.__)("Disable to configure","really-simple-ssl")))),1==g&&(0,s.createElement)("div",{className:"rsssl-locked"},(0,s.createElement)("div",{className:"rsssl-locked-overlay"},(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-learning-mode"},(0,n.__)("Learning Mode","really-simple-ssl")),j," ",(0,s.createElement)("a",{className:"rsssl-learning-mode-link",href:"#",onClick:e=>A(e)},(0,n.__)("Exit","really-simple-ssl")))),1==v&&(0,s.createElement)("div",{className:"rsssl-locked"},(0,s.createElement)("div",{className:"rsssl-locked-overlay"},(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-learning-mode-completed"},(0,n.__)("Learning Mode","really-simple-ssl")),(0,n.__)("We finished the configuration.","really-simple-ssl")," ",(0,s.createElement)("a",{className:"rsssl-learning-mode-link",href:"#",onClick:e=>A(e)},(0,n.__)("Review the settings and enforce the policy","really-simple-ssl")))),rsssl_settings.pro_plugin_active&&e.disabled&&(0,s.createElement)("div",{className:"rsssl-locked "},(0,s.createElement)("div",{className:"rsssl-locked-overlay"},!f&&(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-disabled"},(0,n.__)("Disabled","really-simple-ssl")),f&&(0,s.createElement)("span",{className:"rsssl-progress-status rsssl-learning-mode-enforced"},(0,n.__)("Enforced","really-simple-ssl")),K))),(0,s.createElement)((()=>(0,s.createElement)(s.Fragment,null,(0,s.createElement)("select",{onChange:e=>D(e.target.value),value:x},(0,s.createElement)("option",{value:"-1"},(0,n.__)("All","really-simple-ssl")),(0,s.createElement)("option",{value:"1"},(0,n.__)("Allowed","really-simple-ssl")),(0,s.createElement)("option",{value:"0"},(0,n.__)("Blocked","really-simple-ssl"))))),null))))};var j=l(9196),K=l(870);const z=e=>{const{riskData:t,dataLoaded:r,fetchVulnerabilities:i,updateRiskData:c}=(0,K.Z)(),{fields:d,fieldAlreadyEnabled:m}=(0,o.Z)(),[u,p]=(0,j.useState)(null);if((0,j.useEffect)((()=>{l.e(44).then(l.bind(l,44)).then((e=>{let{default:t,createTheme:l}=e;p((()=>t))}))}),[]),(0,j.useEffect)((()=>{m("enable_vulnerability_scanner")&&(r||i())}),[d]),!r)return null;let f=[];e.field.columns.forEach((function(e,t){let l={name:(s=e).name,sortable:s.sortable,width:s.width,selector:e=>e[s.column],grow:s.grow};var s;f.push(l)}));let y=e.field.options;y=Object.entries(y).map((e=>({label:e[1],value:e[0]})));let g=[...t];for(const e in g){let t={...g[e]};t.riskSelection=(0,s.createElement)(a.SelectControl,{id:t.id,name:t.name,value:t.value,options:y,label:"",onChange:e=>v(e,t)}),g[e]=t}return(0,s.createElement)("div",null,(0,s.createElement)(u,{columns:f,data:Object.values(g)}));function E(e,t){let l=(0,n.__)("Measure was set for "+e,"really-simple-ssl");(0,_.dispatch)("core/notices").createNotice(t,l,{__unstableHTML:!0,id:"rsssl_settings_saved",type:"snackbar",isDismissible:!1}).then((0,h.Z)(2e3)).then((e=>{(0,_.dispatch)("core/notices").removeNotice("rsssl_settings_saved")}))}function v(e,t){new Promise(((l,s)=>{c(t.id,e).then((e=>{E(t.risk,"success"),l()})).catch((e=>{E(t.risk,"error"),s()}))}))}},V=e=>{const[t,l]=(0,j.useState)(e.loading),{setChangedField:a,updateField:n,saveFields:r}=(0,o.Z)(),{fetchVulnerabilities:i,setIntroCompleted:d}=(0,K.Z)();let m=e.title,u=t?"icon-spin":"";return e.name,"first_runner"===e.name?(0,j.useEffect)((()=>{(async()=>{l(!0),(await c.Kw("vulnerabilities_scan_files")).request_success&&(l(!1),u=""),setTimeout((function(){l(!1)}),e.time)})()}),[]):"fourth_runner"===e.name?(0,j.useEffect)((()=>{(async()=>{await i(),d(!0),a("vulnerabilities_intro_shown",!0),n("vulnerabilities_intro_shown",!0),await r(!0,!1),setTimeout((function(){l(!1)}),e.time)})()}),[]):(0,j.useEffect)((()=>{setTimeout((function(){l(!1)}),e.time)}),[]),(0,s.createElement)("div",{className:"rsssl-details"},(0,s.createElement)("div",{className:"rsssl-detail-icon "+u},t?(0,s.createElement)(S.Z,{name:"spinner"}):(0,s.createElement)(S.Z,{name:"circle-check",color:"green"})),(0,s.createElement)("div",{className:"rsssl-detail"},(0,s.createElement)("div",{className:"rsssl-detail-title"},m)))},W=e=>{const[t,l]=(0,s.useState)(!1);if(!t)return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(a.Modal,{title:(0,n.__)("Introducing vulnerabilities","really-simple-ssl"),className:"rsssl-modal",onRequestClose:l,shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0,overlayClassName:"rsssl-modal-overlay"},(0,s.createElement)("div",{className:"rsssl-header-extension"},(0,s.createElement)("div",null,(0,s.createElement)("p",null,(0,n.__)("You have enabled vulnerability scanning! In short, Really Simple SSL will check your plugins, themes and WordPress core daily and report if any vulnerabilities are present..","really-simple-ssl")),(0,s.createElement)("img",{className:"rsssl-intro-logo",src:rsssl_settings.plugin_url+"/assets/img/really-simple-ssl-intro.svg"}))),(0,s.createElement)("div",{className:"rsssl-ssl-intro-container"},(0,s.createElement)(V,{title:(0,n.__)("Preparing vulnerability scanning","really-simple-ssl"),name:"first_runner",loading:!0,time:1e3,delay:1e3}),(0,s.createElement)(V,{title:(0,n.__)("Collecting plugin, theme and WordPress core data","really-simple-ssl"),name:"second_runner",loading:!0,time:2e3,delay:2e3}),(0,s.createElement)(V,{title:(0,n.__)("Scanning all components","really-simple-ssl"),name:"third_runner",loading:!0,time:3e3,delay:3e3}),(0,s.createElement)(V,{title:(0,n.__)("Reporting enabled","really-simple-ssl"),name:"fourth_runner",loading:!0,time:4e3,delay:4e3})),(0,s.createElement)("div",{className:"rsssl-modal-footer"},(0,s.createElement)(a.Button,{isPrimary:!0,onClick:()=>{l(!0),window.location.hash="dashboard"}},(0,n.__)("DashBoard","really-simple-ssl")),(0,s.createElement)(a.Button,{isSecondary:!0,onClick:()=>{l(!0)}},(0,n.__)("Dismiss","really-simple-ssl")))))},U=e=>{const{dataLoaded:t,vulList:a,introCompleted:r,fetchVulnerabilities:i,setDataLoaded:c}=(0,K.Z)(),{fields:d,getField:m,fieldAlreadyEnabled:u,getFieldValue:p}=(0,o.Z)(),[f,h]=(0,j.useState)(!1),[_,y]=(0,j.useState)(null);(0,j.useEffect)((()=>{l.e(44).then(l.bind(l,44)).then((e=>{let{default:t}=e;y((()=>t))}))}),[]);let g=[],E=e.field,v=!1;if(E.columns.forEach((function(e,t){let l={name:(s=e).name,sortable:s.sortable,width:s.width,visible:s.visible,selector:e=>e[s.column]};var s;g.push(l)})),(0,j.useEffect)((()=>{u("enable_vulnerability_scanner")&&(1!=p("vulnerabilities_intro_shown")?r||h(!0):t||i()),1!=p("enable_vulnerability_scanner")||u("enable_vulnerability_scanner")||c(!1)}),[d]),d.forEach((function(e,t){"enable_vulnerability_scanner"===e.id&&(v=e.value)})),!v)return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(_,{columns:g,dense:!0,pagination:!0,noDataComponent:(0,n.__)("No results","really-simple-ssl"),persistTableHead:!0}),(0,s.createElement)("div",{className:"rsssl-locked"},(0,s.createElement)("div",{className:"rsssl-locked-overlay"},(0,s.createElement)("span",{className:"rsssl-task-status rsssl-open"},(0,n.__)("Disabled","really-simple-ssl")),(0,s.createElement)("span",null,(0,n.__)("Activate vulnerability scanning to enable this block.","really-simple-ssl")))));let b=a;return(0,s.createElement)(s.Fragment,null,b.length>0&&(0,s.createElement)(_,{columns:g,data:b,dense:!0,pagination:!0,noDataComponent:(0,n.__)("No results","really-simple-ssl"),persistTableHead:!0}),f&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(W,null)))},q=e=>{const{addHelpNotice:t}=(0,o.Z)();return(0,s.createElement)(s.Fragment,null,e.field.url&&(0,s.createElement)(f.Z,{className:"button button-default",text:e.field.button_text,url:e.field.url}),e.field.action&&(0,s.createElement)("button",{onClick:()=>{return l=e.field.action,void c.Kw(l,{}).then((l=>{let s=l.success?"success":"warning",a=(0,n.__)("Test notification by email","really-simple-ssl"),r=l.message;t(e.field.id,s,r,a,!1)}));var l},className:"button button-default"},e.field.button_text))};var Y=l(7462),$=l(1898),G=l(6989),J=l.n(G);const Q=e=>{let{field:t}=e;const[a,r]=(0,j.useState)([]),[i,c]=(0,j.useState)(""),{updateField:d,setChangedField:m}=(0,o.Z)(),[u,p]=(0,j.useState)(null),[f,h]=(0,j.useState)(null),[_,y]=(0,j.useState)(null);return(0,j.useEffect)((()=>{l.e(964).then(l.bind(l,9964)).then((e=>{let{default:t}=e;y((()=>t))})),l.e(812).then(l.bind(l,2812)).then((e=>{let{createTheme:t,ThemeProvider:l}=e;p((()=>l)),h((()=>t({typography:{fontSize:12,fontFamily:"inherit"},overrides:{MuiInputBase:{root:{fontSize:"12px",fontFamily:"inherit",height:"40px"}},MuiList:{root:{fontSize:"8px"}},MuiAutocomplete:{inputRoot:{"& .MuiAutocomplete-input":{padding:"0 !important",border:0},flexWrap:"inherit"},popper:{fontSize:"12px"},paper:{fontSize:"12px"},option:{fontSize:"12px"},root:{padding:0}}}})))}))}),[]),(0,j.useEffect)((()=>{J()({path:"/wp/v2/pages?per_page=100"}).then((e=>{const t=e.map((e=>({title:e.title.rendered,id:e.id})));r([{title:"404 (default)",id:"404_default"},...t])}))}),[]),(0,j.useEffect)((()=>{"404_default"!==t.value?J()({path:`wp/v2/pages/${t.value}`}).then((e=>{e.title?c({title:e.title.rendered,id:t.value}):c({title:"404 (default)",id:"404_default"})})):c({title:"404 (default)",id:"404_default"})}),[t.value]),_&&u&&f?(0,s.createElement)("div",null,(0,s.createElement)("label",{htmlFor:"rsssl-filter-post-input"},(0,n.__)("Redirect to this post when someone tries to access /wp-admin or /wp-login.php. The default is a 404 page.","really-simple-ssl")),(0,s.createElement)(u,{theme:f},(0,s.createElement)(_,{options:a,getOptionLabel:e=>e.title?e.title:"",renderInput:e=>(0,s.createElement)($.Z,(0,Y.Z)({},e,{variant:"outlined",placeholder:(0,n.__)("Search for a post.","really-simple-ssl")})),getOptionSelected:(e,t)=>e.id===t.id,onChange:(e,l)=>{let s=l&&l.id?l.id:"404_default";d(t.id,s),m(t.id,s)},value:i}))):null},X=e=>{const{field:t}=e,[l,a]=(0,j.useState)(!0),{addHelpNotice:r,fields:i,fieldAlreadyEnabled:d}=(0,o.Z)();return(0,j.useEffect)((()=>{d("enable_vulnerability_scanner")&&a(!1)}),[i]),(0,s.createElement)(s.Fragment,null,(0,s.createElement)("button",{onClick:()=>(async()=>{await c.Kw("vulnerabilities_test_notification"),r(t.id,"success",(0,n.__)("All notifications are triggered successfully, please check your email to double-check if you can receive emails.","really-simple-ssl"),(0,n.__)("Test notifications","really-simple-ssl"),!1)})(),disabled:l,className:"button button-default"},t.button_text))},ee=e=>{let t=React.createRef();const{updateField:l,setChangedField:r,highLightField:i}=(0,o.Z)();(0,s.useEffect)((()=>{i===e.field.id&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start"})}),[]);const c=t=>{let s=e.field;l(s.id,t);let a=!1;if(s.configure_on_activation){s.configure_on_activation.hasOwnProperty("condition")&&e.field.value==s.configure_on_activation.condition&&(a=!0);let t=s.configure_on_activation[0];for(let e in t)a&&t.hasOwnProperty(e)&&l(e,t[e])}r(s.id,t)},d=e=>{let t=e.warning?"red":"black";return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"cmplz-label-text"},e.label),e.tooltip&&(0,s.createElement)(S.Z,{name:"info-open",tooltip:e.tooltip,color:t}))};let h=e.field,_=h.value,y=h.disabled,g="rsssl-field-wrap";i===e.field.id&&(g="rsssl-field-wrap rsssl-highlight");let E=[];if(h.options)for(var v in h.options)if(h.options.hasOwnProperty(v)){let e={};e.label=h.options[v],e.value=v,E.push(e)}if(!rsssl_settings.networkwide_active&&h.networkwide_required&&(y=!0,h.comment=(0,s.createElement)(s.Fragment,null,(0,n.__)("This feature is only available networkwide.","really-simple-ssl"),(0,s.createElement)(f.Z,{target:"_blank",text:(0,n.__)("Network settings","really-simple-ssl"),url:rsssl_settings.network_link}))),h.conditionallyDisabled&&(y=!0),!h.visible)return(0,s.createElement)(s.Fragment,null);if("checkbox"===h.type)return(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(I,{label:d(h),field:h,disabled:y,onChangeHandler:e=>c(e)}),h.comment&&(0,s.createElement)("div",{className:"rsssl-comment",dangerouslySetInnerHTML:{__html:h.comment}}));if("hidden"===h.type)return(0,s.createElement)("input",{type:"hidden",value:h.value});if("radio"===h.type)return(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(a.RadioControl,{label:d(h),onChange:e=>c(e),selected:_,options:E}));if("text"===h.type||"email"===h.type)return(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(a.TextControl,{required:h.required,placeholder:h.placeholder,disabled:y,help:h.comment,label:d(h),onChange:e=>c(e),value:_}));if("button"===h.type)return(0,s.createElement)("div",{className:"rsssl-field-button "+g,ref:t},(0,s.createElement)("label",null,h.label),(0,s.createElement)(q,{field:h}));if("password"===h.type)return(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(u,{index:e.index,field:h}));if("textarea"===h.type)return(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(a.TextareaControl,{label:h.label,help:h.comment,value:_,onChange:e=>c(e),disabled:h.disabled}));if("license"===h.type){let l=e.field,a=l.value;return(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(m,{index:e.index,field:l,fieldValue:a}))}return"number"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(a.__experimentalNumberControl,{onChange:e=>c(e),help:h.comment,label:h.label,value:_})):"email"===h.type?(0,s.createElement)("div",{className:(void 0).highLightClass,ref:(void 0).scrollAnchor},(0,s.createElement)(a.TextControl,{help:h.comment,label:h.label,onChange:e=>(void 0).onChangeHandler(e),value:_})):"host"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(p,{index:e.index,field:e.field})):"select"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(a.SelectControl,{disabled:y,help:h.comment,label:d(h),onChange:e=>c(e),value:_,options:E})):"support"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(A,null)):"postdropdown"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(Q,{field:e.field})):"permissionspolicy"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(M,{disabled:y,field:e.field,options:E})):"learningmode"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(H,{disabled:y,field:e.field})):"riskcomponent"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(z,{field:e.field})):"mixedcontentscan"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(R,{field:e.field})):"vulnerabilitiestable"===h.type?(0,s.createElement)("div",{className:g,ref:t},(0,s.createElement)(U,{field:e.field})):"notificationtester"===h.type?(0,s.createElement)("div",{className:"rsssl-field-button "+g,ref:t},(0,s.createElement)("label",null,h.label),(0,s.createElement)(X,{field:e.field})):"letsencrypt"===h.type?(0,s.createElement)(x,{field:h}):"activate"===h.type?(0,s.createElement)(k,{field:h}):"not found field type "+h.type}}}]);